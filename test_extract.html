<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é“¾æ¥æå–åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
        .test-case { margin-bottom: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .input { background: #f5f5f5; padding: 10px; margin: 10px 0; white-space: pre-wrap; }
        .output { background: #e8f5e8; padding: 10px; margin: 10px 0; }
        .error { background: #ffe8e8; }
    </style>
</head>
<body>
    <h1>é“¾æ¥æå–åŠŸèƒ½æµ‹è¯•</h1>
    
    <div id="testResults"></div>

    <script>
        // å¤åˆ¶é“¾æ¥æå–å‡½æ•°
        function extractUrlFromShareText(shareText) {
            if (!shareText || typeof shareText !== 'string') {
                return shareText;
            }
            
            const urlPatterns = [
                // æŠ–éŸ³é“¾æ¥æ¨¡å¼
                /https?:\/\/v\.douyin\.com\/[A-Za-z0-9\-_]+/gi,
                /https?:\/\/www\.douyin\.com\/[^\s]+/gi,
                /https?:\/\/[^\s]*douyin\.com[^\s]*/gi,
                
                // å¿«æ‰‹é“¾æ¥æ¨¡å¼
                /https?:\/\/[^\s]*kuaishou\.com[^\s]*/gi,
                /https?:\/\/[^\s]*ks\.com[^\s]*/gi,
                
                // å°çº¢ä¹¦é“¾æ¥æ¨¡å¼
                /https?:\/\/[^\s]*xiaohongshu\.com[^\s]*/gi,
                /https?:\/\/[^\s]*xhs\.com[^\s]*/gi,
                
                // å“”å“©å“”å“©é“¾æ¥æ¨¡å¼
                /https?:\/\/[^\s]*bilibili\.com[^\s]*/gi,
                /https?:\/\/[^\s]*b23\.tv[^\s]*/gi,
                
                // å¾®è§†é“¾æ¥æ¨¡å¼
                /https?:\/\/[^\s]*weishi\.qq\.com[^\s]*/gi,
                
                // é€šç”¨HTTP/HTTPSé“¾æ¥æ¨¡å¼ï¼ˆä½œä¸ºå…œåº•ï¼‰
                /https?:\/\/[^\s]+/gi
            ];
            
            for (const pattern of urlPatterns) {
                const matches = shareText.match(pattern);
                if (matches && matches.length > 0) {
                    let extractedUrl = matches[0];
                    extractedUrl = extractedUrl.replace(/[ï¼Œã€‚ï¼ï¼Ÿï¼›ï¼šã€""''ï¼ˆï¼‰ã€ã€‘]$/, '');
                    return extractedUrl;
                }
            }
            
            return shareText;
        }

        // æµ‹è¯•ç”¨ä¾‹
        const testCases = [
            {
                name: "ç”¨æˆ·æä¾›çš„æŠ–éŸ³åˆ†äº«å†…å®¹",
                input: "5.87 å¤åˆ¶æ‰“å¼€æŠ–éŸ³ï¼Œçœ‹çœ‹ã€åœˆåœˆæœ¨çš„ä½œå“ã€‘è¿™æœŸçœŸæ˜¯æˆ‘å®šåˆ¶çš„# ä¸Šè½¦èˆ # å›¢æ’­ # èˆè¹ˆ  https://v.douyin.com/oGcdsob-2Q8/ F@H.Vl 06/10 dnd:/",
                expected: "https://v.douyin.com/oGcdsob-2Q8/"
            },
            {
                name: "çº¯æŠ–éŸ³é“¾æ¥",
                input: "https://www.douyin.com/video/7123456789",
                expected: "https://www.douyin.com/video/7123456789"
            },
            {
                name: "æŠ–éŸ³çŸ­é“¾æ¥",
                input: "https://v.douyin.com/ABC123/",
                expected: "https://v.douyin.com/ABC123/"
            },
            {
                name: "å¿«æ‰‹åˆ†äº«å†…å®¹",
                input: "çœ‹çœ‹è¿™ä¸ªè§†é¢‘ https://www.kuaishou.com/short-video/3x123456789 å¾ˆæœ‰æ„æ€",
                expected: "https://www.kuaishou.com/short-video/3x123456789"
            },
            {
                name: "å°çº¢ä¹¦åˆ†äº«å†…å®¹",
                input: "å°çº¢ä¹¦åˆ†äº« https://www.xiaohongshu.com/explore/abc123 å–œæ¬¢çš„è¯è®°å¾—ç‚¹èµ",
                expected: "https://www.xiaohongshu.com/explore/abc123"
            },
            {
                name: "æ— æ•ˆè¾“å…¥",
                input: "è¿™é‡Œæ²¡æœ‰é“¾æ¥ï¼Œåªæ˜¯æ™®é€šæ–‡æœ¬",
                expected: "è¿™é‡Œæ²¡æœ‰é“¾æ¥ï¼Œåªæ˜¯æ™®é€šæ–‡æœ¬"
            }
        ];

        // è¿è¡Œæµ‹è¯•
        function runTests() {
            const resultsDiv = document.getElementById('testResults');
            let allPassed = true;

            testCases.forEach((testCase, index) => {
                const result = extractUrlFromShareText(testCase.input);
                const passed = result === testCase.expected;
                allPassed = allPassed && passed;

                const testDiv = document.createElement('div');
                testDiv.className = 'test-case';
                
                testDiv.innerHTML = `
                    <h3>æµ‹è¯• ${index + 1}: ${testCase.name} ${passed ? 'âœ…' : 'âŒ'}</h3>
                    <div class="input"><strong>è¾“å…¥:</strong><br>${testCase.input}</div>
                    <div class="output ${passed ? '' : 'error'}"><strong>è¾“å‡º:</strong><br>${result}</div>
                    <div class="output"><strong>æœŸæœ›:</strong><br>${testCase.expected}</div>
                `;
                
                resultsDiv.appendChild(testDiv);
            });

            // æ·»åŠ æ€»ç»“
            const summaryDiv = document.createElement('div');
            summaryDiv.innerHTML = `<h2>æµ‹è¯•æ€»ç»“: ${allPassed ? 'å…¨éƒ¨é€šè¿‡ ğŸ‰' : 'éƒ¨åˆ†å¤±è´¥ âš ï¸'}</h2>`;
            resultsDiv.insertBefore(summaryDiv, resultsDiv.firstChild);
        }

        // é¡µé¢åŠ è½½åè¿è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html>
